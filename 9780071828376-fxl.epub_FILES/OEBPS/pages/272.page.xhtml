<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pf110" class="pf w2 h2" data-page-no="110"><div class="pc pc110 w2 h2"><div class="t m0 xa3 h10 y83 ff2 fs2 fc0 sc0 ls8 ws0">Chapter 7: Phase III: Remote T<span class="_ _0"/>argeting<span class="_ _9"> </span><span class="ff1 fs9 lsa">249</span></div><div class="t m0 x4 hd y11c ff4 fs7 fc0 sc0 ls0 ws0">So to create a greedy access point in which we respond to all probe requests but </div><div class="t m0 x3 hd y11d ff4 fs7 fc0 sc0 ls0 ws0">act as an <span class="_ _2"/>AP for only specic client MAC addresses, we w<span class="_ _0"/>ould use</div><div class="t m0 x3 h40 y19bc fff fs5 fc0 sc0 ls0 ws0">root@kali:/# airbase-ng -c 11 --essid NOT-EVIL -a 00:21:DE:AD:BE:EF --clients </div><div class="t m0 x3 h40 y19bd fff fs5 fc0 sc0 ls0 ws0">cmacs.txt mon0</div><div class="t m0 x3 h40 y19be fff fs5 fc0 sc0 ls0 ws0">12:02:19  Created tap interface at0</div><div class="t m0 x3 h40 y19bf fff fs5 fc0 sc0 ls0 ws0">12:02:19  Trying to set MTU on at0 to 1500</div><div class="t m0 x3 h40 y19c0 fff fs5 fc0 sc0 ls0 ws0">12:02:19  Access Point with BSSID 00:21:6A:DE:AD:11 started.</div><div class="t m0 x4 hd y19c1 ff4 fs7 fc0 sc0 ls0 ws0">After we hav<span class="_ _0"/>e created the access point, we’ll ha<span class="_ _0"/>ve to set the IP conguration of </div><div class="t m0 x3 hd y19c2 ff4 fs7 fc0 sc0 ls0 ws0">the access point and congure the DHCP server to hand out the IP conguration to </div><div class="t m0 x3 h3f y19c3 ff4 fs7 fc0 sc0 ls12 ws0">client de<span class="_ _0"/>vices. <span class="_ _0"/>When we use the <span class="fff">airbase-ng</span> command, it creates a T<span class="_ _1b"/>AP interface, </div><div class="t m0 x3 hd y19c4 ff4 fs7 fc0 sc0 ls0 ws0">which is a purely virtual (software) layer 2 interface and the def<span class="_ _0"/>ault is at0. <span class="_ _2"/>As a layer </div><div class="t m0 x3 hd y19c5 ff4 fs7 fc0 sc0 ls0 ws0">2 interface, it has a MA<span class="_ _2"/>C address and can communicate with other hosts on layer 2.</div><div class="t m0 x4 hd y19c6 ff4 fs7 fc0 sc0 ls0 ws0">W<span class="_ _3"/>e congure the at0 interface just like any other interf<span class="_ _0"/>ace in Linux using the </div><div class="t m0 x3 hd y19c7 ff4 fs7 fc0 sc0 ls0 ws0">follo<span class="_ _0"/>wing code:</div><div class="t m0 x3 h70 y19c8 fff fs2 fc0 sc0 ls0 ws0">root@kali:~# <span class="fse">ifconfig at0 10.0.0.1 netmask 255.255.255.0</span></div><div class="t m0 x4 hd y19c9 ff4 fs7 fc0 sc0 ls0 ws0">W<span class="_ _3"/>e’ll use the standard Linux server isc-dhcp-server as our DHCP serv<span class="_ _0"/>er<span class="_ _2"/>. This is </div><div class="t m0 x3 hd y19ca ff4 fs7 fc0 sc0 ls0 ws0">not installed by default in Kali, so rst install it with:</div><div class="t m0 x3 h44 y19cb fff fse fc0 sc0 ls0 ws0">root@kali:~# apt-get install isc-dhcp-server </div><div class="t m0 x4 hd y19cc ff4 fs7 fc0 sc0 ls0 ws0">Then we’ll ha<span class="_ _0"/>ve to create the conguration for our DHCP serv<span class="_ _0"/>er in /etc/dhcp/</div><div class="t m0 x3 hd y19cd ff4 fs7 fc0 sc0 ls0 ws0">dhcpd.conf. Most of the conguration is straightforward as sho<span class="_ _0"/>wn here:</div><div class="t m0 x3 h44 y19ce fff fse fc0 sc0 ls0 ws0">default-lease-time 60;</div><div class="t m0 x3 h44 y19cf fff fse fc0 sc0 ls0 ws0">max-lease-time 72;</div><div class="t m0 x3 h44 y19d0 fff fse fc0 sc0 ls0 ws0">ddns-update-style none;</div><div class="t m0 x3 h44 y19d1 fff fse fc0 sc0 ls0 ws0">authoritative;</div><div class="t m0 x3 h44 y19d2 fff fse fc0 sc0 ls0 ws0">log-facility local7;</div><div class="t m0 x3 h44 y19d3 fff fse fc0 sc0 ls0 ws0">subnet 10.0.0.0 netmask 255.255.255.0 {</div><div class="t m0 x3 h44 y19d4 fff fse fc0 sc0 ls0 ws0">      range 10.0.0.100 10.0.0.254;</div><div class="t m0 x3 h44 y19d5 fff fse fc0 sc0 ls0 ws0">      option routers 10.0.0.1;</div><div class="t m0 x3 h44 y19d6 fff fse fc0 sc0 ls0 ws0">      option domain-name-servers 10.0.0.1;</div><div class="t m0 x3 h44 y19d7 fff fse fc0 sc0 ls0 ws0">}</div><div class="t m0 x4 hd y19d8 ff4 fs7 fc0 sc0 ls0 ws0">T<span class="_ _3"/>o start the DHCP server<span class="_ _0"/>, we use the follo<span class="_ _0"/>wing command:</div><div class="t m0 x3 h44 y19d9 fff fse fc0 sc0 ls0 ws0">root@kali:~# dhcpd -cf /etc/dhcp/dhcpd.conf</div><div class="t m0 x3 h44 y19da fff fse fc0 sc0 ls0 ws0">--- SNIP ---</div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>