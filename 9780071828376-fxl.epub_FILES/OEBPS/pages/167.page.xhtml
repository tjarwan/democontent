<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pfa7" class="pf w2 h2" data-page-no="a7"><div class="pc pca7 w2 h2"><div class="t m0 xbe h10 y83 ff1 fs9 fc0 sc0 lsa ws0">144<span class="_ _d"> </span><span class="ff2 fs2 ls8">Advanced Persistent Threat Hacking<span class="_ _1e"/> </span></div><div class="t m0 x4 h3f y11c ff4 fs7 fc0 sc0 ls0 ws0">So our ov<span class="_ _0"/>erall process for mangling the results of our <span class="fff">grep</span> searches that we </div><div class="t m0 x3 hd y11d ff4 fs7 fc0 sc0 ls0 ws0">sav<span class="_ _0"/>ed to the all-names.txt le looks like this:</div><div class="t m0 x3 h44 yc84 fff fse fc0 sc0 ls0 ws0">replace all &lt;br /&gt; with a single comma</div><div class="t m0 x3 h44 yc85 fff fse fc0 sc0 ls0 ws0">Remove &lt;p&gt;&lt;b&gt;Name: &lt;/b&gt; text</div><div class="t m0 x3 h44 yc86 fff fse fc0 sc0 ls0 ws0">Remove &lt;b&gt;Phone: &lt;/b&gt; text</div><div class="t m0 x3 h44 ye37 fff fse fc0 sc0 ls0 ws0">Remove &lt;b&gt;Address: &lt;/b&gt; text</div><div class="t m0 x3 h44 ye38 fff fse fc0 sc0 ls0 ws0">Replace - - text with newline</div><div class="t m0 x4 hd ye54 ff4 fs7 fc0 sc0 ls0 ws0">For search and replace lik<span class="_ _0"/>e this, I prefer to use the vi editor interactiv<span class="_ _0"/>ely so I can </div><div class="t m0 x3 hd ye55 ff4 fs7 fc0 sc0 ls0 ws0">see the changes as they happen and undo them if something unintended happens. </div><div class="t m0 x3 hd ye56 ff4 fs7 fc0 sc0 ls0 ws0">Y<span class="_ _1b"/>ou also need to be aware that we’<span class="_ _2"/>re dealing with at text as well as HTML here, </div><div class="t m0 x3 hd yf8e ff4 fs7 fc0 sc0 ls0 ws0">so we can’t simply replace the HTML te<span class="_ _0"/>xt—we also need to deal with the text, for </div><div class="t m0 x3 hd yf8f ff4 fs7 fc0 sc0 ls0 ws0">example, the ne<span class="_ _0"/>wline characters between lines must be remo<span class="_ _0"/>ved. <span class="_ _0"/>T<span class="_ _2"/>o perform the </div><div class="t m0 x3 hd yf90 ff4 fs7 fc0 sc0 ls0 ws0">search and replace using the vi editor<span class="_ _0"/>, we would use the follo<span class="_ _0"/>wing commands:</div><div class="t m0 x3 h44 yf91 fff fse fc0 sc0 ls0 ws0">vi all-names.txt</div><div class="t m0 x3 h44 yf92 fff fse fc0 sc0 ls0 ws0">ESC</div><div class="t m0 x3 h44 yf93 fff fse fc0 sc0 ls0 ws0">:%s/&lt;br \/&gt;\n/,/g</div><div class="t m0 x3 h44 yf94 fff fse fc0 sc0 ls0 ws0">:%s/&lt;p&gt;&lt;b&gt;Name: &lt;\/b&gt;//g</div><div class="t m0 x3 h44 yf95 fff fse fc0 sc0 ls0 ws0">:%s/&lt;b&gt;Phone: &lt;\/b&gt;//g</div><div class="t m0 x3 h44 yf96 fff fse fc0 sc0 ls0 ws0">:%s/&lt;b&gt;Department: &lt;\/b&gt;//g</div><div class="t m0 x3 h44 yf97 fff fse fc0 sc0 ls0 ws0">:%s/&lt;b&gt;Address: &lt;\/b&gt;//g</div><div class="t m0 x3 h44 yf98 fff fse fc0 sc0 ls0 ws0">:%s/--/\n/g</div><div class="t m0 x4 hd yf99 ff4 fs7 fc0 sc0 ls0 ws0">If we use vi to perform the search and replace, we must rst enter command mode </div><div class="t m0 x3 hd yf9a ff4 fs7 fc0 sc0 ls0 ws0">by pressing  and then a colon ( :). In command mode, e<span class="_ _0"/>verything you type is </div><div class="t m0 x3 hd yf9b ff4 fs7 fc0 sc0 ls0 ws0">interpreted as a command. The basic format of search and replace in vi is </div><div class="t m0 x3 h44 yf9c fff fse fc0 sc0 ls0 ws0">s/SEARCH/REPLACE/</div><div class="t m0 x4 hd yf9d ff4 fs7 fc0 sc0 ls0 ws0">T<span class="_ _3"/>o replace all occurrences of the search string with the replace string, you </div><div class="t m0 x3 hd yf9e ff4 fs7 fc0 sc0 ls0 ws0">would use</div><div class="t m0 x3 h44 yf9f fff fse fc0 sc0 ls0 ws0">%s/SEARCH/REPLACE/g</div><div class="t m0 x4 hd yfa0 ff4 fs7 fc0 sc0 ls0 ws0">The percent sign (%) at the beginning of the command means that all lines in </div><div class="t m0 x3 hd yfa1 ff4 fs7 fc0 sc0 ls0 ws0">the le will be searched. The g at the end of the command is the global ag, which </div><div class="t m0 x3 hd yfa2 ff4 fs7 fc0 sc0 ls0 ws0">matches all of the occurrences of the search pattern for the line will be replaced. </div><div class="t m0 x4 hd yfa3 ff4 fs7 fc0 sc0 ls0 ws0">This is also a common task for scripting languages. I prefer to use Perl, but most </div><div class="t m0 x3 hd yfa4 ff4 fs7 fc0 sc0 ls0 ws0">modern languages support regular<span class="_ _0"/>-expression search and replace. <span class="_ _0"/>T<span class="_ _3"/>o accomplish the </div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>