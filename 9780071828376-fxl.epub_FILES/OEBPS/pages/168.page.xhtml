<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pfa8" class="pf w2 h2" data-page-no="a8"><div class="pc pca8 w2 h2"><img class="bi x94 yfa5 w6 h2e" alt="" src="bga8.png"/><div class="t m0 x5d h10 y83 ff2 fs2 fc0 sc0 ls8 ws0">Chapter 5: Reconnaissance: Nontechnical Data<span class="_ _9"> </span><span class="ff1 fs9 lsa">145</span></div><div class="t m0 x3 hd y172 ff4 fs7 fc0 sc0 ls0 ws0">same search and replace from the pre<span class="_ _0"/>vious vi example using Perl from the command </div><div class="t m0 x3 hd y173 ff4 fs7 fc0 sc0 ls0 ws0">line, we could use the follo<span class="_ _0"/>wing individual search and replace commands:</div><div class="t m0 x65 hd yfa6 ff4 fs7 fc0 sc0 ls0 ws0">perl -i.bak -p -e's/&lt;br \/&gt;\n/,/g' names.txt</div><div class="t m0 x65 hd yfa7 ff4 fs7 fc0 sc0 ls0 ws0">perl -i.bak -p -e's/&lt;p&gt;&lt;b&gt;Name: &lt;\/b&gt;//g' names.txt</div><div class="t m0 x65 hd yfa8 ff4 fs7 fc0 sc0 ls0 ws0">perl -i.bak -p -e's/&lt;b&gt;Phone: &lt;\/b&gt;//g' names.txt</div><div class="t m0 x65 hd yfa9 ff4 fs7 fc0 sc0 ls0 ws0">perl -i.bak -p -e's/&lt;b&gt;Address: &lt;\/b&gt;//g' names.txt</div><div class="t m0 x65 hd yfaa ff4 fs7 fc0 sc0 ls0 ws0">perl -i.bak -p -e's/&lt;'b&gt;Department: &lt;\/b&gt;//g' names.txt</div><div class="t m0 x4 hd yfab ff4 fs7 fc0 sc0 ls0 ws0">The -i.bak tells Perl to rename the le as a .bak le and then edit the le. The -p </div><div class="t m0 x3 hd yfac ff4 fs7 fc0 sc0 ls0 ws0">argument runs the specied command in a basic while loop. <span class="_ _0"/>The -e option allo<span class="_ _0"/>ws </div><div class="t m0 x3 hd yfad ff4 fs7 fc0 sc0 ls0 ws0">you to specify a script on the command line rather than having to create a le. </div><div class="t m0 x3 hd yfae ff4 fs7 fc0 sc0 ls0 ws0">Luckily<span class="_ _2"/>, we can condense this down to one command by separating the search and </div><div class="t m0 x3 hd yfaf ff4 fs7 fc0 sc0 ls0 ws0">replace with a comma, as in the follo<span class="_ _0"/>wing code. Not the prettiest command you’ll </div><div class="t m0 x3 hd yfb0 ff4 fs7 fc0 sc0 ls0 ws0">e<span class="_ _0"/>ver see, b<span class="_ _0"/>ut it gets the job done.</div><div class="t m0 x3 h40 yfb1 fff fs5 fc0 sc0 ls0 ws0">perl -i.bak -p -e's/&lt;br \/&gt;\n/,/g', s/&lt;p&gt;&lt;b&gt;Name: &lt;\/b&gt;//g, s/&lt;b&gt;Phone: &lt;\/</div><div class="t m0 x3 h40 yfb2 fff fs5 fc0 sc0 ls0 ws0">b&gt;//g', s/&lt;b&gt;Address: &lt;\/b&gt;//g', s/&lt;b&gt;Department: &lt;\/b&gt;//g' names.txt</div><div class="t m0 x4 hd yfb3 ff4 fs7 fc0 sc0 lsb ws16">Remember that many special characters need to be escaped. <span class="_ _0"/>That’<span class="_ _2"/>s why all of the </div><div class="t m0 x3 hd yfb4 ff4 fs7 fc0 sc0 ls0 ws0">forward slash characters must rst be escaped with a backslash character (e.g., \/ ); </div><div class="t m0 x3 hd yfb5 ff4 fs7 fc0 sc0 ls0 ws0">otherwise, vi would interpret that as the end of the criteria for searching or replacing.</div><div class="t m0 x4 hd yfb6 ff4 fs7 fc0 sc0 ls0 ws0">Once that’<span class="_ _2"/>s complete, we’<span class="_ _0"/>re left with a nice clean text CSV le, as sho<span class="_ _0"/>wn ne<span class="_ _0"/>xt. <span class="_ _0"/>As </div><div class="t m0 x3 hd yfb7 ff4 fs7 fc0 sc0 ls0 ws0">you can see, each indi<span class="_ _0"/>vidual has their name, phone number<span class="_ _0"/>, department, and address </div><div class="t m0 x3 hd yfb8 ff4 fs7 fc0 sc0 ls0 ws0">on a unique line. <span class="_ _3"/>Y<span class="_ _3"/>ou should note that if the text wraps around to a ne<span class="_ _0"/>wline within a </div><div class="t m0 x3 hd yfb9 ff4 fs7 fc0 sc0 ls0 ws0">user’<span class="_ _2"/>s data line, it may be that the text is too long to display on a single line and there </div><div class="t m0 x3 hd yfba ff4 fs7 fc0 sc0 ls0 ws0">is not a ne<span class="_ _0"/>wline character<span class="_ _0"/>. <span class="_ _0"/>T<span class="_ _3"/>o be sure, you can use the set list command from within </div><div class="t m0 x3 hd yfbb ff4 fs7 fc0 sc0 ls0 ws0">vi to display the ne<span class="_ _0"/>wline characters with a dollar symbol, or you can turn off te<span class="_ _0"/>xt </div><div class="t m0 x3 hd yfbc ff4 fs7 fc0 sc0 ls0 ws0">wrapping in your graphical text editor<span class="_ _2"/>.</div><div class="t m0 x3 h44 yfbd fff fse fc0 sc0 ls0 ws0">John Smith,518-555-1337,Marketing Department,321 Zion Street,--</div><div class="t m0 x3 h44 yfbe fff fse fc0 sc0 ls0 ws0">Joseph Garbunkle,518-555-0204,IT Support,321 Zion Street,--</div><div class="t m0 x94 h2f yfbf ffe fs9 fc0 sc0 ls0 ws0">NOTE</div><div class="t m0 x94 h14 yfc0 ff9 fs7 fc0 sc0 ls0 ws0">Y<span class="_ _2"/>ou should remember the handy command within the vi editor is the <span class="ff12 fs13">:set list</span></div><div class="t m0 x94 h14 yfc1 ff9 fs7 fc0 sc0 ls0 ws0">command, which will show all of the newline characters with a $ symbol, as well as any other </div><div class="t m0 x94 h14 yfc2 ff9 fs7 fc0 sc0 ls0 ws0">hidden characters.</div><div class="t m0 x4 hd yfc3 ff4 fs7 fc0 sc0 ls0 ws0">W<span class="_ _3"/>e also have an absurd amount of options for scripting this. Most an<span class="_ _0"/>y </div><div class="t m0 x3 hd yfc4 ff4 fs7 fc0 sc0 ls0 ws0">moderately modern scripting language will hav<span class="_ _0"/>e support for regular e<span class="_ _0"/>xpressions, </div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>