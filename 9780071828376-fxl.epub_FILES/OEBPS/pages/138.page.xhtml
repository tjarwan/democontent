<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pf8a" class="pf w2 h2" data-page-no="8a"><div class="pc pc8a w2 h2"><img class="bi x94 yafe w6 h2e" alt="" src="bg8a.png"/><div class="t m0 x93 h10 y83 ff2 fs2 fc0 sc0 ls8 ws0">Chapter 4: An APT Approach to Reconnaissance <span class="_ _3f"> </span><span class="ff1 fs9 lsa">115</span></div><div class="t m0 x94 h2f yaff ffe fs9 fc0 sc0 ls0 ws0">NOTE</div><div class="t m0 x94 h14 yb00 ff9 fs7 fc0 sc0 ls0 ws0">Remember to take your time to browse any new websites that we’ve identied that are owned by </div><div class="t m0 x94 h14 yb01 ff9 fs7 fc0 sc0 ls0 ws0">our target organization. Y<span class="_ _2"/>ou never know what kind of juicy data you might nd.</div><div class="t m0 x4 hd yceb ff4 fs7 fc0 sc0 ls0 ws0">W<span class="_ _3"/>e can also mirror target websites to browse them locally or search through them </div><div class="t m0 x3 hd ycec ff4 fs7 fc0 sc0 ls0 ws0">automatically for specic ke<span class="_ _0"/>ywords. Ho<span class="_ _0"/>we<span class="_ _0"/>ver<span class="_ _0"/>, it’<span class="_ _2"/>s typically better to rst analyze </div><div class="t m0 x3 hd yced ff4 fs7 fc0 sc0 ls0 ws0">the specic web systems av<span class="_ _0"/>ailable to us and then mo<span class="_ _0"/>ve on to mirroring specic </div><div class="t m0 x3 hd ycee ff4 fs7 fc0 sc0 ls0 ws0">web systems. By analyzing web systems via screenshot methods rst, we get a </div><div class="t m0 x3 hd ycef ff4 fs7 fc0 sc0 ls0 ws0">much more accurate indication of the purpose of the target web system. If we tried </div><div class="t m0 x3 hd ycf0 ff4 fs7 fc0 sc0 ls0 ws0">to mirror these systems rst and analyze them locally<span class="_ _2"/>, many times they might not </div><div class="t m0 x3 hd ycf1 ff4 fs7 fc0 sc0 ls0 ws0">display correctly<span class="_ _2"/>.</div><div class="t m0 x4 h3f ycf2 ff4 fs7 fc0 sc0 ls0 ws0">One of the best and simplest ways to mirror a web system is using the <span class="fff">wget</span></div><div class="t m0 x3 hd ycf3 ff4 fs7 fc0 sc0 ls0 ws0">command, as in the follo<span class="_ _0"/>wing example:</div><div class="t m0 x3 h44 ycf4 fff fse fc0 sc0 ls0 ws0">wget -m weak-target.com</div><div class="t m0 x4 hd ycf5 ff4 fs7 fc0 sc0 ls0 ws0">The –m command option is used to mirror the remote site and is equi<span class="_ _0"/>valent to -r </div><div class="t m0 x3 hd ycf6 ff4 fs7 fc0 sc0 ls0 ws0">-N -l inf –no-remov<span class="_ _0"/>e-listing. Here the –N option checks the timestamp of the le and </div><div class="t m0 x3 hd ycf7 ff4 fs7 fc0 sc0 ls0 ws0">–l inf enables innite recursion.</div><div class="t m0 x65 hd ycf8 ff4 fs7 fc0 sc0 ls0 ws0">-m option for mirror is equi<span class="_ _0"/>valent to:</div><div class="t m0 x65 hd ycf9 ff4 fs7 fc0 sc0 ls0 ws0">-r -N -l inf –no-remov<span class="_ _0"/>e-listing</div><div class="t m0 x65 hd ycfa ff4 fs7 fc0 sc0 ls0 ws0">-N checks timestamp of le</div><div class="t m0 x65 hd ycfb ff4 fs7 fc0 sc0 ls0 ws0">-l inf innite recursion</div><div class="t m0 x4 h3f ycfc ff4 fs7 fc0 sc0 ls0 ws0">Y<span class="_ _1b"/>ou may need to change how man<span class="_ _0"/>y links deep the <span class="fff">wget</span> command will copy </div><div class="t m0 x3 hd ycfd ff4 fs7 fc0 sc0 ls0 ws0">using the -l argument; the def<span class="_ _0"/>ault depth is only ve le<span class="_ _0"/>vels.</div><div class="t m0 x4 hd ycfe ff4 fs7 fc0 sc0 ls0 ws0">As always be sure to check the man page if you ha<span class="_ _0"/>v<span class="_ _0"/>e any questions.</div><div class="t m0 x3 h7 ycff ff1 fs3 fc0 sc0 ls0 ws0">W<span class="_ _0"/>eb Virtual Host Enumeration</div><div class="t m0 x3 hd yd00 ff4 fs7 fc0 sc0 ls0 ws0">Servers that host multiple websites may utilize a technology called <span class="_ _2"/>V<span class="_ _2"/>irtual Hosts </div><div class="t m0 x3 hd yd01 ff4 fs7 fc0 sc0 ls0 ws0">or <span class="_ _2"/>Vhosts for short. <span class="_ _0"/>V<span class="_ _2"/>irtual Hosts allows a web serv<span class="_ _0"/>er to support multiple websites </div><div class="t m0 x3 hd yd02 ff4 fs7 fc0 sc0 ls0 ws0">on a single server<span class="_ _2"/>. <span class="_ _0"/>When a client visits a web server with multiple sites, the client </div><div class="t m0 x3 hd yd03 ff4 fs7 fc0 sc0 ls0 ws0">(typically a web bro<span class="_ _0"/>wser) will send the desired website in the HTTP headers using </div><div class="t m0 x3 hd yd04 ff4 fs7 fc0 sc0 ls0 ws0">the Host v<span class="_ _0"/>ariable.</div><div class="t m0 x4 hd yd05 ff4 fs7 fc0 sc0 ls0 ws0">If we are able to identify multiple DNS records that point to the same IP address, </div><div class="t m0 x3 hd yd06 ff4 fs7 fc0 sc0 ls0 ws0">this might be a good indication of a system with virtual hosts. <span class="_ _3"/>Y<span class="_ _3"/>ou should note that </div><div class="t m0 x3 hd yd07 ff4 fs7 fc0 sc0 lsb ws16">many times, an or<span class="_ _0"/>ganization will hav<span class="_ _0"/>e multiple DNS records for the same system </div><div class="t m0 x3 hd yd08 ff4 fs7 fc0 sc0 ls0 ws0">that point to the same site, meaning the DNS records do not point to unique virtual </div><div class="t m0 x3 hd yd09 ff4 fs7 fc0 sc0 ls0 ws0">hosts.</div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>