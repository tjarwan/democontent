<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pf113" class="pf w2 h2" data-page-no="113"><div class="pc pc113 w2 h2"><div class="t m0 xbe h10 y83 ff1 fs9 fc0 sc0 lsa ws0">252<span class="_ _d"> </span><span class="ff2 fs2 ls8">Advanced Persistent Threat Hacking<span class="_ _1e"/> </span></div><div class="t m0 x4 hd y11c ff4 fs7 fc0 sc0 ls0 ws0">This version of the freeradius serv<span class="_ _0"/>er was b<span class="_ _0"/>uilt for other distributions, so you’<span class="_ _0"/>ll </div><div class="t m0 x3 hd y11d ff4 fs7 fc0 sc0 ls0 ws0">hav<span class="_ _0"/>e to create the follo<span class="_ _0"/>wing directories as sho<span class="_ _0"/>wn:</div><div class="t m0 x3 h44 yc84 fff fse fc0 sc0 ls0 ws0">mkdir -p /usr/local/var/run/radiusd/</div><div class="t m0 x3 h44 yc85 fff fse fc0 sc0 ls0 ws0">mkdir -p /usr/local/var/log/radius/</div><div class="t m0 x4 hd y1a1b ff4 fs7 fc0 sc0 ls0 ws0">At this point, the server is installed and almost ready to roll. <span class="_ _0"/>W<span class="_ _3"/>e can rst ensure </div><div class="t m0 x3 hd y1a1c ff4 fs7 fc0 sc0 ls0 ws0">that the server is installed and is the correct v<span class="_ _0"/>ersion of 2.1.12 using the follo<span class="_ _0"/>wing </div><div class="t m0 x3 hd y1a1d ff4 fs7 fc0 sc0 ls0 ws0">command:</div><div class="t m0 x3 h44 y1a1e fff fse fc0 sc0 ls0 ws0">radiusd -v</div><div class="t m0 x4 hd y1a1f ff4 fs7 fc0 sc0 ls0 ws0">Next, we’<span class="_ _0"/>ll hav<span class="_ _0"/>e to add the client conguration to the clients.conf le. In this case, </div><div class="t m0 x3 hd y1a20 ff4 fs7 fc0 sc0 ls0 ws0">the client is the RADIUS client, which is our access point, so rather than conguring </div><div class="t m0 x3 hd y1a21 ff4 fs7 fc0 sc0 ls0 ws0">a single IP<span class="_ _1b"/>, we’ll congure any IP on the 10.0.0.0/24 subnet and allo<span class="_ _0"/>w them to </div><div class="t m0 x3 hd y1a22 ff4 fs7 fc0 sc0 lsb ws16">authenticate users against the RADIUS server<span class="_ _2"/>. Then you’<span class="_ _0"/>ll want to add the follo<span class="_ _0"/>wing </div><div class="t m0 x3 hd y1a23 ff4 fs7 fc0 sc0 ls0 ws0">lines to the end of the /usr/local/etc/raddb/clients.conf le:</div><div class="t m0 x3 h44 y1a24 fff fse fc0 sc0 ls0 ws0">client 10.0.0.0/24 {</div><div class="t m0 x3 h44 y1a25 fff fse fc0 sc0 ls0 ws0">        secret          = radiuspass123</div><div class="t m0 x3 h44 y1a26 fff fse fc0 sc0 ls0 ws0">        shortname       = private-network</div><div class="t m0 x3 h44 y1a27 fff fse fc0 sc0 ls0 ws0">}</div><div class="t m0 x4 hd y1a28 ff4 fs7 fc0 sc0 ls0 ws0">At this point, we can run the RADIUS server<span class="_ _2"/>. If you want to rst start the </div><div class="t m0 x3 hd y1a29 ff4 fs7 fc0 sc0 ls0 ws0">RADIUS server in deb<span class="_ _0"/>ug mode, you can use -X option, as in the follo<span class="_ _0"/>wing </div><div class="t m0 x3 hd y1a2a ff4 fs7 fc0 sc0 ls0 ws0">command. This will output a lot of information to the terminal windo<span class="_ _0"/>w<span class="_ _2"/>, including </div><div class="t m0 x3 hd y1a2b ff4 fs7 fc0 sc0 ls0 ws0">any attempts by end users to authenticate.</div><div class="t m0 x3 h44 y1a2c fff fse fc0 sc0 ls0 ws0">root@kali:~# radiusd -X</div><div class="t m0 x4 hd y1a2d ff4 fs7 fc0 sc0 ls0 ws0">Once you’<span class="_ _2"/>re satised that the server is up and running, you can run the RADIUS </div><div class="t m0 x3 hd y1a2e ff4 fs7 fc0 sc0 ls0 ws0">server in the background using the follo<span class="_ _0"/>wing command:</div><div class="t m0 x3 h44 y1a2f fff fse fc0 sc0 ls0 ws0">root@kali:~# radius</div><div class="t m0 x4 hd y1a30 ff4 fs7 fc0 sc0 ls0 ws0">No<span class="_ _0"/>w the RADIUS server is running and waiting for authentication requests from </div><div class="t m0 x3 hd y1a31 ff4 fs7 fc0 sc0 ls0 ws0">our access point. Most access points are extremely easy to congure. </div><div class="t m0 x4 hd y1a32 ff4 fs7 fc0 sc0 ls0 ws0">In this case, based on the conguration le we created, the RADIUS server is </div><div class="t m0 x3 hd y1a33 ff4 fs7 fc0 sc0 ls0 ws0">10.0.0.10, the RADIUS port for authentication is 1812, and the shared secret or </div><div class="t m0 x3 hd y1a34 ff4 fs7 fc0 sc0 ls0 ws0">password is radiuspass123. <span class="_ _2"/>After the access point is congured, test it by associating </div><div class="t m0 x3 hd y1a35 ff4 fs7 fc0 sc0 ls0 ws0">to the access point and enter any credentials you wish—no matter what is entered, </div><div class="t m0 x3 hd y1a36 ff4 fs7 fc0 sc0 ls0 ws0">the hash will be logged on the RADIUS server<span class="_ _2"/>. The def<span class="_ _0"/>ault log location for </div><div class="t m0 x3 hd y1a37 ff4 fs7 fc0 sc0 ls0 ws0">credentials is</div><div class="t m0 x3 h44 y1a38 fff fse fc0 sc0 ls0 ws0">/usr/local/var/log/radius/freeradius-server-wpe.log</div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>