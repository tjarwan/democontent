<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pfa6" class="pf w2 h2" data-page-no="a6"><div class="pc pca6 w2 h2"><div class="t m0 x5d h10 y83 ff2 fs2 fc0 sc0 ls8 ws0">Chapter 5: Reconnaissance: Nontechnical Data<span class="_ _9"> </span><span class="ff1 fs9 lsa">143</span></div><div class="t m0 x3 h44 yb3f fff fse fc0 sc0 ls0 ws0">&lt;b&gt;Address: &lt;/b&gt;321 Zion Street&lt;br /&gt;</div><div class="t m0 x3 h44 yb40 fff fse fc0 sc0 ls0 ws0">--</div><div class="t m0 x3 h44 yb41 fff fse fc0 sc0 ls0 ws0">&lt;p&gt;&lt;b&gt;Name: &lt;/b&gt;Joseph Garbunkle&lt;br /&gt;</div><div class="t m0 x3 h44 yb42 fff fse fc0 sc0 ls0 ws0">&lt;b&gt;Phone: &lt;/b&gt;518-555-0204&lt;br /&gt;</div><div class="t m0 x3 h44 yb43 fff fse fc0 sc0 ls0 ws0">&lt;b&gt;Department: &lt;/b&gt;IT Support&lt;br /&gt;</div><div class="t m0 x3 h44 yb44 fff fse fc0 sc0 ls0 ws0">&lt;b&gt;Address: &lt;/b&gt;321 Zion Street&lt;br /&gt;</div><div class="t m0 x3 h44 yb45 fff fse fc0 sc0 ls0 ws0">--</div><div class="t m0 x3 h44 yb63 fff fse fc0 sc0 ls0 ws0">--- SNIP --- </div><div class="t m0 x3 h44 yb64 fff fse fc0 sc0 ls0 ws0">user@kali:~$</div><div class="t m0 x4 hd yf73 ff4 fs7 fc0 sc0 ls0 ws0">If this produces too many f<span class="_ _0"/>alse positiv<span class="_ _0"/>es, we can match the lines more specically </div><div class="t m0 x3 hd yf74 ff4 fs7 fc0 sc0 ls0 ws0">with the follo<span class="_ _0"/>wing command:</div><div class="t m0 x3 h44 yf75 fff fse fc0 sc0 ls0 ws0">grep '&lt;p&gt;&lt;b&gt;Name: &lt;\/b&gt;' ./* -A 3</div><div class="t m0 x4 hd yf76 ff4 fs7 fc0 sc0 ls0 ws0">W<span class="_ _3"/>e could get much crazier with our regular expression to ensure the phone </div><div class="t m0 x3 hd yf77 ff4 fs7 fc0 sc0 ls0 ws0">number is a phone number and none of the lines after the expression are blank or </div><div class="t m0 x3 hd yf78 ff4 fs7 fc0 sc0 ls0 ws0">contain erroneous data; ho<span class="_ _0"/>wev<span class="_ _0"/>er<span class="_ _0"/>, we’ll automate this task later if it’<span class="_ _2"/>s necessary<span class="_ _2"/>. For </div><div class="t m0 x3 hd yf79 ff4 fs7 fc0 sc0 ls0 ws0">no<span class="_ _0"/>w<span class="_ _2"/>, let’<span class="_ _0"/>s look at a good quick and dirty way to get this data out of the le.</div><div class="t m0 x4 h3f yf7a ff4 fs7 fc0 sc0 ls0 ws0">Y<span class="_ _1b"/>ou’ll notice that the output from the <span class="fff">grep</span> command separates each individual </div><div class="t m0 x3 hd yf7b ff4 fs7 fc0 sc0 ls0 ws0">match with two dashes and a ne<span class="_ _0"/>wline ( -- ). This alone will mak<span class="_ _0"/>e it easy for us to </div><div class="t m0 x3 hd yf7c ff4 fs7 fc0 sc0 ls0 ws0">work with the output and separate records of an indi<span class="_ _0"/>vidual employee. If the output </div><div class="t m0 x3 hd yf7d ff4 fs7 fc0 sc0 ls0 ws0">looks like it doesn’<span class="_ _0"/>t contain (or contains very fe<span class="_ _0"/>w) false matches, you can output all </div><div class="t m0 x3 hd yf7e ff4 fs7 fc0 sc0 ls0 ws0">of the names to a single le using the follo<span class="_ _0"/>wing command. This command searches </div><div class="t m0 x3 hd yf7f ff4 fs7 fc0 sc0 ls0 ws0">for any line that contains the “&lt;p&gt;&lt;b&gt;Name: &lt;/b&gt;” te<span class="_ _0"/>xt and then prints that line as </div><div class="t m0 x3 hd yf80 ff4 fs7 fc0 sc0 ls0 ws0">well as the three lines after it (-A3) and sav<span class="_ _0"/>es it to the all-names.txt le. </div><div class="t m0 x3 h44 yf81 fff fse fc0 sc0 ls0 ws0">grep '&lt;p&gt;&lt;b&gt;Name: &lt;\/b&gt;' ./* -A 3 &gt;&gt; all-names.txt</div><div class="t m0 x4 hd yf82 ff4 fs7 fc0 sc0 ls0 ws0">No<span class="_ _0"/>w that we hav<span class="_ _0"/>e all of the rele<span class="_ _0"/>vant data in one single te<span class="_ _0"/>xt le, let’<span class="_ _2"/>s look at how </div><div class="t m0 x3 hd yf83 ff4 fs7 fc0 sc0 ls0 ws0">to quickly get this data formatted as a CSV (comma-separated v<span class="_ _0"/>alues) le where </div><div class="t m0 x3 hd yf84 ff4 fs7 fc0 sc0 ls0 ws0">each indi<span class="_ _0"/>vidual person is on their own line and each data point is separated by a </div><div class="t m0 x3 hd yf85 ff4 fs7 fc0 sc0 lsb ws16">common delimiter<span class="_ _2"/>. <span class="_ _0"/>Again, we ha<span class="_ _0"/>ve man<span class="_ _0"/>y options for performing search and replace. </div><div class="t m0 x3 hd yf86 ff4 fs7 fc0 sc0 ls0 ws0">If you’<span class="_ _2"/>re more comfortable with a graphical text editor (such as gedit), feel free to </div><div class="t m0 x3 hd yf87 ff4 fs7 fc0 sc0 ls0 ws0">stick with that. I prefer to script this or use the vi editor<span class="_ _0"/>, as the<span class="_ _0"/>y tend to be much </div><div class="t m0 x3 hd yf88 ff4 fs7 fc0 sc0 ls0 ws0">faster with lar<span class="_ _0"/>ge data sets.</div><div class="t m0 x4 hd yf89 ff4 fs7 fc0 sc0 ls0 ws0">Because almost no personnel directory you deal with will be identical, you should </div><div class="t m0 x3 hd yf8a ff4 fs7 fc0 sc0 ls0 ws0">take this opportunity to rst think out each step of your search and replace. <span class="_ _3"/>Y<span class="_ _1b"/>ou’ll </div><div class="t m0 x3 hd yf8b ff4 fs7 fc0 sc0 ls0 ws0">notice that in the HTML pages returned, each of our target data lines ends with </div><div class="t m0 x3 hd yf8c ff4 fs7 fc0 sc0 ls0 ws0">&lt;br /&gt;, or the HTML equi<span class="_ _0"/>valent of a line break. <span class="_ _0"/>This looks like the perfect initial </div><div class="t m0 x3 hd yf8d ff4 fs7 fc0 sc0 ls0 ws0">replacement to get all of our data on one line by replacing all &lt;br /&gt; with a comma.</div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>