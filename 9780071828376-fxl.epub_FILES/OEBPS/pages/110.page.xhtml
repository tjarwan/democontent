<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title/><link rel="stylesheet" href="../css/base.min.css"/><link rel="stylesheet" href="../css/fancy.min.css"/><link rel="stylesheet" href="../css/pdf.css"/><meta name="viewport" content="width=640, height=824"/></head><body><div id="page_body"><div id="pf6e" class="pf w2 h2" data-page-no="6e"><div class="pc pc6e w2 h2"><img class="bi x94 y9b6 w6 h2e" alt="" src="bg6e.png"/><div class="t m0 x93 h10 y83 ff2 fs2 fc0 sc0 ls8 ws0">Chapter 4: An APT Approach to Reconnaissance <span class="_ _3f"> </span><span class="ff1 fs9 lsa">87</span></div><div class="t m0 x16 h1f y467 ffb fse fc0 sc0 ls0 ws0">c</div><div class="t m0 x1 h2c y468 ff3 fs7 fc0 sc0 ls0 ws0">AAAA<span class="_ _41"> </span><span class="ff4">The host record for IPv6 addresses.</span></div><div class="t m0 x16 h1f y469 ffb fse fc0 sc0 ls0 ws0">c</div><div class="t m0 x1 h2c y46a ff3 fs7 fc0 sc0 ls0 ws0">TXT<span class="_ _41"> </span><span class="ff4">T<span class="_ _2"/>ext or arbitrary “human-readable” data.</span></div><div class="t m0 x16 h1f y9b7 ffb fse fc0 sc0 ls0 ws0">c</div><div class="t m0 x1 h2c y9b8 ff3 fs7 fc0 sc0 ls0 ws0">Sender Policy Framew<span class="_ _0"/>ork (SPF)<span class="_ _a"> </span><span class="ff4">Used to indicate legitimate mail sources </span></div><div class="t m0 x1 hd y9b9 ff4 fs7 fc0 sc0 ls0 ws0">for a domain to help ght spam.</div><div class="t m0 x94 h2f y9ba ffe fs9 fc0 sc0 ls0 ws0">NOTE</div><div class="t m0 x94 h14 y9bb ff9 fs7 fc0 sc0 ls0 ws0">Due to the very large number of addresses in IPV6, in the future we’ll have to rely much more on </div><div class="t m0 x94 h14 y9bc ff9 fs7 fc0 sc0 ls0 ws0">DNS to identify live hosts.</div><div class="t m0 x4 hd y9bd ff4 fs7 fc0 sc0 ls0 ws0">There are really three main methods for identifying DNS information: zone </div><div class="t m0 x3 hd y9be ff4 fs7 fc0 sc0 ls0 ws0">transfers, brute forcing, and harvesting. Zone transfers allo<span class="_ _0"/>w us to do<span class="_ _0"/>wnload an </div><div class="t m0 x3 hd y9bf ff4 fs7 fc0 sc0 ls0 ws0">entire DNS database from a DNS server<span class="_ _2"/>. Brute forcing in<span class="_ _0"/>v<span class="_ _0"/>olves automated as </div><div class="t m0 x3 hd y9c0 ff4 fs7 fc0 sc0 ls0 ws0">well as manually guessing potential DNS names and looking for v<span class="_ _0"/>alid responses. </div><div class="t m0 x3 hd y9c1 ff4 fs7 fc0 sc0 ls0 ws0">Harvesting in<span class="_ _2"/>volves scraping search engines and websites for references to v<span class="_ _0"/>alid </div><div class="t m0 x3 hd y9c2 ff4 fs7 fc0 sc0 ls0 ws0">DNS hostnames in the target domain.</div><div class="t m0 x3 h7 y9c3 ff1 fs3 fc0 sc0 ls0 ws0">Zone T<span class="_ _3"/>ransfers</div><div class="t m0 x3 hd y9c4 ff4 fs7 fc0 sc0 ls0 ws0">A zone transfer allo<span class="_ _0"/>ws a DNS server to send all the DNS records (the zone le) it has </div><div class="t m0 x3 hd y9c5 ff4 fs7 fc0 sc0 ls0 ws0">for a specic domain to a querying client. <span class="_ _2"/>At a basic level, this is typically performed </div><div class="t m0 x3 hd y9c6 ff4 fs7 fc0 sc0 ls0 ws0">by backup DNS servers to sync their DNS database with a primary serv<span class="_ _0"/>er<span class="_ _2"/>. Being </div><div class="t m0 x3 hd y9c7 ff4 fs7 fc0 sc0 ls0 ws0">able to transfer all of the records for a gi<span class="_ _0"/>ven domain is ob<span class="_ _0"/>viously extremely v<span class="_ _0"/>aluable </div><div class="t m0 x3 hd y9c8 ff4 fs7 fc0 sc0 ls0 ws0">information.</div><div class="t m0 x4 hd y9c9 ff4 fs7 fc0 sc0 ls0 ws0">K<span class="_ _0"/>eep in mind that DNS queries use User Datagram Port (UDP) port 53, whereas </div><div class="t m0 x3 hd y9ca ff4 fs7 fc0 sc0 ls0 ws0">zone transfers use T<span class="_ _2"/>ransmission Control Protocol (TCP) port 53. Howe<span class="_ _0"/>ver<span class="_ _2"/>, it is not </div><div class="t m0 x3 hd y9cb ff4 fs7 fc0 sc0 lsb ws16">uncommon for an organization to e<span class="_ _0"/>xpose TCP port 53 to the Internet and use access </div><div class="t m0 x3 hd y9cc ff4 fs7 fc0 sc0 ls0 ws0">control lists (A<span class="_ _0"/>CLs) on the serv<span class="_ _0"/>er itself to restrict which servers are allo<span class="_ _0"/>wed to </div><div class="t m0 x3 hd y9cd ff4 fs7 fc0 sc0 ls0 ws0">perform zone transfers. Thus, if you see that a serv<span class="_ _0"/>er on the target netw<span class="_ _0"/>ork has TCP </div><div class="t m0 x3 hd y9ce ff4 fs7 fc0 sc0 ls0 ws0">port 53 open, it does not necessarily mean you’ll be able to perform a zone transfer<span class="_ _2"/>.</div><div class="t m0 x4 h3f y9cf ff4 fs7 fc0 sc0 ls1c ws0">Y<span class="_ _1b"/>ou can attempt a zone transfer using the <span class="fff">dig</span><span class="ls1d ws17"> command, as in the following </span></div><div class="t m0 x3 hd y9d0 ff4 fs7 fc0 sc0 ls1d ws16">example, and you might be surprised that some or<span class="_ _0"/>ganizations do still allo<span class="_ _0"/>w zone </div><div class="t m0 x3 hd y9d1 ff4 fs7 fc0 sc0 ls1d ws16">transfers. Many of the tools used for DNS enumeration will attempt a zone transfer </div><div class="t m0 x3 hd y9d2 ff4 fs7 fc0 sc0 ls1c ws0">automatically for you.</div><div class="t m0 x3 h43 y9d3 fff fs11 fc0 sc0 ls1e ws0">user@kali:~# dig @nydns1.about.com about.com axfr</div><div class="t m0 x3 h43 y9d4 fff fs11 fc0 sc0 ls1e ws0">; &lt;&lt;&gt;&gt; DiG 9.8.1-P1 &lt;&lt;&gt;&gt; @nydns1.about.com about.com axfr</div><div class="t m0 x3 h43 y9d5 fff fs11 fc0 sc0 ls1e ws0">; (1 server found)</div><div class="t m0 x3 h43 y9d6 fff fs11 fc0 sc0 ls1e ws0">;; global options: +cmd</div></div><div class="pi" data-data="{&#34;ctm&#34;:[1.209373,0.000000,0.000000,1.209373,0.000000,0.000000]}"/></div></div></body></html>